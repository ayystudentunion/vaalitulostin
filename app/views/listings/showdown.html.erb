<%= link_to "&larr; Takaisin etusivulle".html_safe, admin_dashboard_path %>

<h1>Ääntenlaskennan eteneminen</h1>

<h2>Ohjeet äänestysalueen ottamiseksi mukaan ääntenlaskentaan:</h2>
<ul>
  <li>Valitse äänestysalueet ja paina "Laske".</li>
  <li>Uusi vaalitulos näkyy vaalitulossivulla.</li>
  <li>Kun äänestysalueen tilana on "kesken", äänestysalueen pj ei ole vielä merkinnyt ääniä lasketuiksi.</li>
  <li>Kun äänestysalueen tilana on "laskennassa", äänet eivät vielä näy osana vaalitulosta.</li>
  <li>Äänten laskeminen tapahtuu taustalla, ja laskenta kestää 5-15 minuuttia.</li>
  <li>Kun äänestysalueen tilana on "laskettu", näkyvät alueelta annetut äänet osana vaalitulosta.</li>
</ul>

<%= form_tag showdown_listings_path, :method => :post, :class => "showdown" do -%>
  <table class="long-listing">
    <tr>
      <th colspan="2">Äänestysalue</th>
      <th>Ääniä</th>
      <th>Laskentaan</th>
    </tr>
  <% @voting_areas.each do |area| -%>
    <% area_decorator = VotingAreaDecorator.new(area) %>
    <tr class="<%= area_decorator.state_class %>">
      <td><%= area_decorator.code %></td>
      <td><%= area_decorator.name %></td>
      <td><%= area_decorator.vote_count %></td>
      <td>
        <% if area_decorator.markable_ready? %>
          <input type="checkbox" id="mark_ready_<%= area_decorator.id %>" name="mark_ready[]" value="<%= area_decorator.id %>" />
        <% else %>
          <%= area_decorator.formatted_state(area.ready?) %>
        <% end %>
      </td>
    </tr>
  <% end %>
  </table>
  <p>
    <input type="submit" value="Ota valitut äänestysalueet laskentaan" />
  </p>

<% end -%>
