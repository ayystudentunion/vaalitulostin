&larr; <%= link_to "Takaisin etusivulle".html_safe, admin_dashboard_path %>

<h1>Äänestysalueet ääntenlaskentaan</h1>

<h3>Alkuvalmistelut</h3>
<ul>
  <li>Aseta <%= link_to "alustavat ääni- ja äänestäjämäärät", edit_manage_configuration_path %> ääntenlaskentaprosentin laskemista varten.</li>
  <li>Hyväksyttyjen äänten lukumääränä voidaan käyttää aluksi äänestäjämäärää, koska äänten lukumäärä selviää vasta ääntenlaskennan päätyttyä.</li>
  <li>Äänestäjämäärä selviää äänioikeuden tarkistamisjärjestelmästä.</li>
</ul>

<h3>Ääntenlaskennan eteneminen</h3>
<ul>
  <li>Valitse äänestysalueet ja paina "Laske".</li>
  <li>Uusi vaalitulos näkyy <%= link_to "vaalitulossivulla", manage_results_path %>.</li>
  <li>Äänestysalueen voi ottaa laskentaan vasta, kun äänestysalueen pj on merkinnyt sen syötetyksi.</li>
  <li>Äänten laskeminen tapahtuu taustalla, ja laskenta kestää 1-5 minuuttia.</li>
</ul>

<h3>Ennen viimeisen äänestysalueen laskemista:</h3>
<ul>
  <li>Kun hyväksyttyjen äänten yhteislukumäärä on selvillä,
    <br>
    <%= link_to "aseta äänimäärä asetussivulle", edit_manage_configuration_path %>
       ennen viimeisen äänestysalueen ottamista mukaan laskentaan.
       <br />
       Tällöin ääntenlaskentaprosentti on lopuksi tasan 100 %.</li>
  <li>Hyväksyttyjen äänten lukumäärä näkyy äänestysaluetaulukon alimmalla rivillä.</li>
  <li>Jos unohdat lisätä lopullisen hyväksyttyjen äänten lukumäärän, vaalivalvojaisissa tulee kettuilua 99,2% tai 101,5% -ääntenlaskentaprosentista. </li>
</ul>

<%= form_tag showdown_listings_path, :method => :post, :class => "showdown" do -%>
  <table class="long-listing">
    <tr>
      <th colspan="2">Äänestysalue</th>
      <th>Ääniä</th>
      <th>Laskentaan</th>
    </tr>
  <% @voting_areas.each do |area| -%>
    <% area_decorator = VotingAreaDecorator.new(area) %>
    <tr class="<%= area_decorator.state_class %>">
      <td><%= area_decorator.code %></td>
      <td><%= area_decorator.name %></td>
      <td><%= area_decorator.vote_count %></td>
      <td>
        <% if area_decorator.markable_ready? %>
          <input type="checkbox" id="mark_ready_<%= area_decorator.id %>" name="mark_ready[]" value="<%= area_decorator.id %>" />
        <% else %>
          <%= area_decorator.formatted_state(area.ready?) %>
        <% end %>
      </td>
    </tr>
  <% end %>
    <tr>
      <td></td>
      <td>Yhteensä</td>
      <td><%= Vote.sum("amount") %></td>
      <td></td>
    </tr>
  </table>
  <p>
    <input type="submit" value="Ota valitut äänestysalueet laskentaan" />
  </p>

<% end -%>
